define(["jQuery","Underscore","Backbone","views/main_panel/recommendations","collections/user_list","views/general/user_list","collections/event_list","views/general/event_list","helpers/template_manager","helpers/assets","event_manager"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.View.extend({initialize:function(){this.loaded=!1,this.userParams={}},el:"div#search",events:{"click .button_big":"back"},makeSearch:function(){this.userList.params=this.userParams,this.userList.fetch()},getUserRouteList:function(){return{read:"droppy_user_ajax_search_users"}},search:function(e){this.userParams={keywords:e}},initUserList:function(){this.userList=new i,t.extend(this.userList,{routeList:this.getUserRouteList(),comparator:function(e){return e.get("username")},params:this.userParams}),new s({userList:this.userList,templateName:"single_user",el:"div.userlist"}),this.userList.on("reset",this.showResults,this)},showResults:function(){this.$("div.userlist").show(),this.$("span.result.before").hide(),this.$("span.result.after").text(ExposeTranslation.get("search.user_result",{number:this.userList.length}))},initElements:function(){this.$el.jScrollPane({verticalGutter:0,autoReinitialise:!0})},show:function(){this.$el.show(),this.$("div#search").height(e(window).height()-e("div#header").height()),this.initElements(),this.initUserList(),this.loaded=!0},back:function(){l.trigger("back")}});return new c});