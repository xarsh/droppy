define(["jQuery","Underscore","Backbone","helpers/template_manager","event_manager","helpers/assets"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"div",initialize:function(){this.showCreator=typeof this.options.showCreator!="undefined"?this.options.showCreator:!0,this.template=t.template(r.getTemplate(this.options.templateName))},events:{"click div.title":"showEvent","click span.edit":"editEvent","click span.delete":"deleteEvent","click div.button_small":"toggleDrop","click p.user":"showUser"},render:function(){var e=this.model.display();return e.options={showCreator:this.showCreator},this.$el.html(this.template(s.wrapAssetics(e))),this},toggleDrop:function(t){$target=e(t.target),$target.is("div")||($target=$target.parent());if(this.model.get("loading"))return;this.model.get("dropped")?i.trigger("undrop",this.model,$target,!1):i.trigger("drop",this.model,$target,!1)},showEvent:function(e){e.preventDefault(),i.trigger("changePage","event",{id:this.model.get("id")})},editEvent:function(e){i.trigger("editEvent",this.model)},deleteEvent:function(e){this.model.destroy(),this.$el.remove()},showUser:function(e){e.preventDefault(),i.trigger("changePage","user",{username:this.model.get("creator").get("username")})}});return o});