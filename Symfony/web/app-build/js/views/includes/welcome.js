define(["jQuery","Underscore","Backbone","event_manager"],function(e,t,n,r){var i=n.View.extend({el:"div#welcome",events:{"click .next":"nextPopup","click .finish":"finishGuidance"},initialize:function(){r.on("loaded",this.closeAllPopups(),this);var t=e("#main_calendar td.today");if(t.length===0){this.$("#ewp").remove();var n=this.$(".popup").last();n.find(".next").remove(),n.find(".finish").text(ExposeTranslation.get("button.close"))}else{var i=t.offset();this.$("#ewp").css({left:i.left-90,top:i.top-100,right:"auto"})}this.showFirstPopup()},showFirstPopup:function(){this.$(".popup").first().fadeIn("fast")},nextPopup:function(){var e=this.$(".popup").filter(":visible").next();this.closeAllPopups(),e.fadeIn("fast")},finishGuidance:function(){this.closeAllPopups(),e.ajax({type:"POST",url:Routing.generate("droppy_user_ajax_set_started")})},closeAllPopups:function(){this.$(".popup").fadeOut("fast")}});return i});