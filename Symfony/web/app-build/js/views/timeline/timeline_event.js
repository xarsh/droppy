define(["jQuery","Underscore","Backbone","helpers/template_manager","event_manager","helpers/assets"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"div",initialize:function(){this.model.on("remove",this.remove,this)},template:t.template(r.getTimelineEventTemplate()),events:{"click div.event":"showDetails","click a.close":"closeEvent","click div.info div.display_name":"showProfile","mouseenter div.event":"showClose","mouseleave div.event":"hideClose"},render:function(){return this.$el.html(this.template(s.wrapAssetics(this.model.display()))),this},showClose:function(){this.$("a.close").show()},hideClose:function(){this.$("a.close").hide()},showDetails:function(e){e.stopPropagation(),i.trigger("changePage","event",{id:this.model.get("id")})},showProfile:function(e){e.preventDefault(),e.stopPropagation(),i.trigger("changePage","user",{username:this.model.get("creator").get("username")})},closeEvent:function(e){e.preventDefault(),e.stopPropagation(),this.model.undrop(),this.remove()},remove:function(){var e=this.$el.parent("div");this.$el.remove(),e.find("div").not(".daybar").length===0&&e.hide()}});return o});