define(["jQuery","Underscore","Backbone","event_manager"],function(e,t,n,r){var i=n.View.extend({initialize:function(e){this.$el=e},events:{"click a.close":"close","click div":"stopPropagation"},open:function(t,n){e("#event_summary_popup").hide(),e("#make_event_popup").hide(),this.setPosition(t,n),this.$el.children("div").show();var r=this;e("body").click(function(){r.close.call(r)})},close:function(e){typeof e!="undefined"&&e.preventDefault(),this.$el.children("div").hide()},setPosition:function(e,t){var n=this.$el.children("div"),r=n.innerWidth(),i=n.innerHeight(),s=30,o=document.documentElement.clientWidth||document.body.clientWidth||document.body.scrollWidth;t-i>0?n.css("top",t-i):n.css("top",t),e+r/2+s<=o?n.css("left",e-r/2):n.css("left",brouserWidth-r-s)},toDetails:function(){this.close(),r.trigger("editEvent",this.model)},stopPropagation:function(e){e.stopPropagation()}});return i});