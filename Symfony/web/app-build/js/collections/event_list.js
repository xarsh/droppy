define(["jQuery","Underscore","Backbone","model/event"],function(e,t,n,r){var i=n.Collection.extend({model:r,initialize:function(){this.allLoaded=!1,this.loading=!1,typeof this.params=="undefined"&&(this.params={})},setFromJSON:function(e){for(var t in e){var n=new r;n.setFromJSON(e[t]),this.add(n,{silent:!0})}this.trigger("reset")},comparator:function(e,t){return-1*e.compareDates(t)},loadMore:function(){if(this.loading||this.allLoaded)return;t.extend(this.params,{offset:this.length}),this.loading=!0;var e=this;this.fetch({add:!0,success:function(t,n){e.loading=!1,n.length===0&&(e.allLoaded=!0)}})},sync:function(e,t,r){var i="params"in this?this.params:{};return r.url=Routing.generate(this.routeList[e],i),n.sync(e,t,r)}});return i.fromJSON=function(e){return t.map(e,function(e){var t=new r;return t.setFromJSON(e),t})},i});