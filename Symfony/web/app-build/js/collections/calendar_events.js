define(["jQuery","Underscore","Backbone","model/event","event_manager","bootstrap"],function(e,t,n,r,i,s){var o=n.Collection.extend({model:r,initialize:function(){this.date=new Date,this.params={},s.bootstrappedCalendar&&this.setFromJSON(s.bootstrappedCalendar),i.on("calendarAdd",this.silentAdd,this),i.on("outOfCalendar",this.silentRemove,this)},setFromJSON:function(e){for(var t in e){var n=new r;n.setFromJSON(e[t]),this.add(n,{silent:!0})}this.trigger("reset")},getParams:function(){var e=t.extend(this.params,{start:this.date.firstDateToDisplay().format("Y-m-d"),end:this.date.lastDateToDisplay().format("Y-m-d")});return e},silentAdd:function(e){this.add(e,{silent:!0}),this.trigger("add")},silentRemove:function(e){this.remove(e,{silent:!0}),this.trigger("remove")},comparator:function(e,t){return-1*e.compareDates(t)},routeList:{read:"droppy_event_ajax_interval"},getEventsInMonth:function(){var e=this.date.firstDateToDisplay(),t=this.date.lastDateToDisplay();return this.filter(function(n){return n.get("endDateTime").get("date")>=e&&n.get("startDateTime").get("date")<=t})},getEventsNumberOnDate:function(e){return this.filter(function(t){return t.printed&&(e.dateEquals(t.get("startDateTime").get("date"))||t.get("endDateTime").get("date")>=e&&t.get("startDateTime").get("date")<=e)}).length},resetPrintedStatus:function(){this.map(function(e){e.printed=!1})},setDate:function(e){this.date=e},sync:function(e,t,r){var i=this.getParams();return r.url=Routing.generate(this.routeList[e],i),n.sync(e,t,r)}});return new o});